# ============================
# TAXY Macros (Klipper-safe)
# Uses TAXY_* commands internally (no numbers in command names)
# ============================

[gcode_macro CALIB_CAMERA_TAXY]
description: Calibrate camera mm-per-pixel model
gcode:
  TAXY_CALIB_CAMERA


[gcode_macro FIND_NOZZLE_CENTER_TAXY]
description: Find and move to nozzle center
gcode:
  TAXY_FIND_NOZZLE_CENTER


[gcode_macro SET_ORIGIN_TAXY]
description: Save current camera center position as origin
gcode:
  TAXY_SET_ORIGIN


[gcode_macro MOVE_TO_ORIGIN_TAXY]
description: Move toolhead to saved camera center origin (RAW coordinates)
gcode:
  TAXY_MOVE_TO_ORIGIN


[gcode_macro SIMPLE_NOZZLE_POSITION_TAXY]
description: Detect nozzle position (simple)
gcode:
  TAXY_SIMPLE_NOZZLE_POSITION


[gcode_macro GET_OFFSET_TAXY]
description: Get XY offset from origin
gcode:
  TAXY_GET_OFFSET
  PRINT_OFFSET_TAXY


[gcode_macro PRINT_OFFSET_TAXY]
description: Print last calculated offset
gcode:
  {action_respond_info("TAXY offset X:" ~ printer.taxy.last_calculated_offset[0] ~ " Y:" ~ printer.taxy.last_calculated_offset[1])}


[gcode_macro SEND_SERVER_CFG_TAXY]
description: Send camera configuration to TAXY server
gcode:
  TAXY_SEND_SERVER_CFG


[gcode_macro STOP_PREVIEW_TAXY]
description: Stop live nozzle detection preview
gcode:
  TAXY_STOP_PREVIEW


[gcode_macro START_PREVIEW_TAXY]
description: Start live nozzle detection preview (AI visualization)
gcode:
  TAXY_START_PREVIEW


# ============================
# Legacy compatibility macros
# (for users migrating from kTAY8)
# ============================

[gcode_macro CALIB_CAMERA_KTAY8]
gcode:
  CALIB_CAMERA_TAXY

[gcode_macro START_PREVIEW_KTAY8]
gcode:
  START_PREVIEW_TAXY

[gcode_macro STOP_PREVIEW_KTAY8]
gcode:
  STOP_PREVIEW_TAXY
